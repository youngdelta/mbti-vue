<template>
	<div>
		<h2 class="page-subtitle">ë‚´ ë³¸ìºëŠ”?!</h2>
		<h1 class="page-title"></h1>
		<img
			class="character"
			src=""
			alt="character" />

		<div class="result">
			<div class="box"></div>
			<div class="box"></div>
			<div class="box"></div>
			<div class="box"></div>
		</div>
		<div class="result">
			<h3>ì´ëŸ° ë‚´ê°€ ì§ì—…ì„ ê°–ëŠ”ë‹¤ë©´?</h3>
			<div class="jobs">
				<div class="job"></div>
				<div class="job"></div>
			</div>
		</div>
		<div class="result">
			<h3>ì´ëŸ° ì§ì—… ê°•ì˜ëŠ” ì–´ë–¤ê°€ìš”?</h3>
			<a
				href=""
				target="_blank"
				class="lecture">
				<img
					src="/images/result_lecture1.png"
					alt="ê°•ì˜" />
			</a>
		</div>

		<div class="btn btn-green btn-small share-or-copy">ê²°ê³¼ ê³µìœ í•˜ê¸°</div>
		<a
			href="/"
			class="btn btn-gray btn-small"
			>ë‹¤ì‹œ í…ŒìŠ¤íŠ¸</a
		>
	</div>
</template>

<script>
	import { results, mbtis } from '@/assets/js/data.js';

	export default {
		name: 'ResultView',
		created() {},
		mounted() {
			this.setResult();
		},
		data() {
			return {};
		},
		props: {},
		methods: {
			setResult() {
				const mbti = new URLSearchParams(location.search).get('mbti');

				const result = results[mbtis[mbti]];
				console.log('ğŸš€ ~ file: results.js:6 ~ result', result);

				const titleEl = document.querySelector('.page-title');
				const subTitleEl = document.querySelector('.page-subtitle');
				const charactersEl = document.querySelector('.character');
				const boxEls = document.querySelectorAll('.box');
				const jobEls = document.querySelectorAll('.job');
				const lectureEl = document.querySelector('.lecture');
				const lectureImgEl = document.querySelector('.lecture img');

				titleEl.innerHTML = result.title;
				charactersEl.src = `.${result.character}`;
				lectureImgEl.src = `.${result.lectureImg}`;
				lectureEl.href = `${result.lectureUrl}`;
				jobEls.forEach((j, idx) => {
					j.innerHTML = result.jobs[idx];
				});
				boxEls.forEach((b, idx) => {
					b.innerHTML = result.results[idx];
				});
				subTitleEl.append(` ${mbti?.toUpperCase() || ''}`);
			},
		},
	};
</script>

<style lang="scss" scoped></style>
